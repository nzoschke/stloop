#!/usr/bin/env ruby

require 'heroku'
require 'heroku/command'

# monkey-patch Heroku to read auth from env, and use vendored plugin
module Heroku
  class Auth
    def get_credentials
      [ENV["HEROKU_USERNAME"], ENV["HEROKU_PASSWORD"]]
    end
  end

  class Plugin
    def self.directory
      File.expand_path(File.dirname(__FILE__) + "/../lib")
    end
  end
end

args = ARGV.dup
ARGV.clear
command = args.shift.strip rescue 'help'

Heroku::Command.load
Heroku::Command.run(command, args)
